{% extends "container/public.html" %}

{% block content %}
<p>Welcome, {{ client.get_name() }}.</p>
<p>You registered on {{ profile.created_at }}.</p>

<h2>Avatar</h2>

<div class="avatar-section">
    {% match profile.avatar_filename %}
    {% when Some with (filename) %}
    <div class="current-avatar" style="margin-bottom: 15px;">
        <p>Current avatar:</p>
        {{ profile.get_avatar_html(crate::attachment::AttachmentSize::L)|safe }}
    </div>
    {% when None %}
    <p>You don't have an avatar yet.</p>
    {% endmatch %}

    <form action="/account/avatar" method="post" enctype="multipart/form-data" style="display: inline-block; margin-right: 10px;">
        <input type="hidden" name="csrf_token" value="{{ client.get_csrf_token() }}">
        <input type="file" name="avatar" required />
        <button type="submit">Upload Avatar</button>
    </form>

    {% match profile.avatar_filename %}
    {% when Some with (filename) %}
    <form action="/account/avatar/delete" method="post" style="display: inline-block;">
        <input type="hidden" name="csrf_token" value="{{ client.get_csrf_token() }}">
        <button type="submit" onclick="return confirm('Are you sure you want to delete your avatar?');">Delete Avatar</button>
    </form>
    {% when None %}
    {% endmatch %}
</div>

{% endblock %}
