<main id="chat">
    {% if rooms.len() > 0 %}
    <div id="chat-rooms">
        {% for room in rooms %}
        <a class="chat-room" role="button" href="#{{ room.id }}" data-id="{{ room.id }}">{{room.title}}</a>
        {% endfor %}
    </div>
    {% endif %}
    <div class="chat-content">
        <div id="chat-scroller" class="chat-scroller">
            <div id="chat-messages"></div>
        </div>
        <div id="chat-activity-scroller" class="chat-scroller">
            <div id="chat-activity"></div>
        </div>
    </div>
    <form id="new-message-form" class="chat-form">
        <input id="chat-input-room" type="hidden" name="room" value="0" />

        <div class="chat-toolbar" role="toolbar" aria-label="Text formatting">
            <button type="button" data-bbcode="b" title="Bold" class="chat-toolbar-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"/></svg>
            </button>
            <button type="button" data-bbcode="i" title="Italic" class="chat-toolbar-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"/></svg>
            </button>
            <button type="button" data-bbcode="u" title="Underline" class="chat-toolbar-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/></svg>
            </button>
            <button type="button" data-bbcode="s" title="Strikethrough" class="chat-toolbar-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"/></svg>
            </button>
            <div class="chat-color-picker">
                <button type="button" title="Text color" class="chat-toolbar-btn chat-color-btn">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                </button>
                <div class="chat-color-dropdown">
                    <div class="chat-color-presets">
                        <button type="button" class="chat-color-swatch" data-color="#ff0000" style="background:#ff0000" title="Red"></button>
                        <button type="button" class="chat-color-swatch" data-color="#ff8000" style="background:#ff8000" title="Orange"></button>
                        <button type="button" class="chat-color-swatch" data-color="#ffff00" style="background:#ffff00" title="Yellow"></button>
                        <button type="button" class="chat-color-swatch" data-color="#00ff00" style="background:#00ff00" title="Green"></button>
                        <button type="button" class="chat-color-swatch" data-color="#00ffff" style="background:#00ffff" title="Cyan"></button>
                        <button type="button" class="chat-color-swatch" data-color="#0080ff" style="background:#0080ff" title="Blue"></button>
                        <button type="button" class="chat-color-swatch" data-color="#8000ff" style="background:#8000ff" title="Purple"></button>
                        <button type="button" class="chat-color-swatch" data-color="#ff00ff" style="background:#ff00ff" title="Magenta"></button>
                        <button type="button" class="chat-color-swatch" data-color="#ffffff" style="background:#ffffff" title="White"></button>
                        <button type="button" class="chat-color-swatch" data-color="#808080" style="background:#808080" title="Gray"></button>
                        <button type="button" class="chat-color-swatch" data-color="#000000" style="background:#000000" title="Black"></button>
                        <button type="button" class="chat-color-swatch" data-color="#8b4513" style="background:#8b4513" title="Brown"></button>
                    </div>
                    <div class="chat-color-custom">
                        <input type="color" class="chat-color-input" value="#ff0000" title="Custom color">
                        <button type="button" class="chat-color-apply">Apply</button>
                    </div>
                </div>
            </div>
            <span class="chat-toolbar-divider"></span>
            <button type="button" data-bbcode="url" title="Insert link" class="chat-toolbar-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>
            </button>
            <button type="button" data-bbcode="img" title="Insert image" class="chat-toolbar-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
            </button>
            <button type="button" data-bbcode="spoiler" title="Spoiler" class="chat-toolbar-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/></svg>
            </button>
            <button type="button" data-bbcode="code" title="Code" class="chat-toolbar-btn">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/></svg>
            </button>
        </div>

        <div class="chat-fields">
            <div id="new-message-input" class="chat-input" name="message" contenteditable="true"
                aria-label="Message the room" aria-multiline="true"></div>

            <div class="chat-form-buttons">
                <button tabindex="0" id="new-message-submit" class="submit">
                    <div class="sprite">
                        <svg width="24" height="24" viewBox="0 0 97.1 97.1" aria-hidden="false">
                            <path
                                d="m93.82 0.37c-0.697-0.469-1.6-0.494-2.32-0.066l-88.112 52.281c-0.748 0.444-1.158 1.291-1.043 2.152 0.113 0.86 0.732 1.571 1.568 1.805l22.389 6.233c0.68 0.188 1.409 0.036 1.956-0.41l35.768-29.219-24.951 31.847c-0.301 0.382-0.462 0.854-0.462 1.339v28.602c0 0.966 0.636 1.814 1.563 2.083 0.201 0.06 0.405 0.087 0.607 0.087 0.728 0 1.425-0.366 1.83-1.004l15.577-24.45 22.772 6.338c0.598 0.167 1.24 0.067 1.764-0.271 0.521-0.339 0.873-0.885 0.967-1.499l11.06-73.725c0.125-0.828-0.238-1.655-0.933-2.123z" />
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </form>
</main>

{% include "chat/template.html" %}